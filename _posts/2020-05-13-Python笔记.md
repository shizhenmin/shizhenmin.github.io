---
title: Python学习笔记
categories: Python
tags: Python 笔记
---

* content
{:toc}


## 代码规范

编码

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
```

引号

- 自然语言：使用双引号 `"..."`
- 机器标识：使用单引号 `'...'`
- 正则表达式：使用原生的双引号 `r"..."`
- 文档字符串 (docstring)：使用三个双引号 `"""......"""`

空行

- 顶级定义之间空两行，如函数和类定义之间空两行
- 类成员函数之间空一行
- 流程控制语句上下各加1个空行

命名规范

- 类：类名使用驼峰(CamelCase)命名风格，首字母大写
- 函数：函数名一律小写，如有多个单词，用下划线隔开
- 变量：变量名尽量小写, 如有多个单词，用下划线隔开



## 基本数据类型

- 按存储模型分：
  - 标量类型：数字，字符串
  - 容器类型：列表，元组，字典，集合
- 按访问模型分：
  - 直接访问：数字
  - 顺序访问：字符串，列表，元组
  - 映射访问：字典，集合
- 按更新模型分：
  - 不可变模型：数字，字符串，元组
  - 可变模型：列表，字典，集合




身份比较 `is`： `print(a is b)`，返回 `True` 或 `False`。数字、字符串、元组为True，列表、字典、集合为False。



变量 `b` 指向变量 `a` 所指向的数据

```python
a = 'ABC'
b = a
a = 'XYZ'
print(b)
# 输出ABC
```



<br>

### 数字

数字包括 `整型`， `浮点型`， `布尔型`， `复数` 这几种类型。



#### 内置函数

| 函数              | 作用                   | 返回值类型 |
| ----------------- | ---------------------- | ---------- |
| int()             | 将任意进制转化成十进制 | 返回整型   |
| float()           | 转换浮点数             | 返回浮点型 |
| round(数字, 位数) | 四舍五入               | 返回浮点型 |
| abs()             | 求绝对值               | 返回整型   |
| sum()             | 求和                   | 返回整型   |
| min()             | 最小值                 | 返回整型   |
| max()             | 最大值                 | 返回整型   |
| pow(底数, 指数)   | 取幂                   | 返回整型   |



#### 操作符

算术操作符：`+`， `-`， `*`， `/`， `%`， `//`， `**`

比较操作符：`>`， `>=`， `<`， `<=`， `==`， `!=`

赋值操作符：`=`， `+=`， `-=`， `*=`， `/=`， `%=`， `**=`， `//=`



<br>

### 字符串

特殊字符

字符串引号前有 `r` 或 `R`，则字符串不转义：

```python
path=r'c:\tmp\newdir'
```



#### 类型转换

`str()` 

`ord(string)` 

`chr(number)`



#### 序列属性

索引

```python
string1[number]  #序号从0开始，0表示第1位，-1表示倒数第1位
```

切片

切片没有的下标不会报错

```python
string1[n1:n2:n3]  #从n1到n2(不包括n2)；步长为n3(默认为1)，-1表示倒序
```

加法

```python
string1 + string2 + ... + stringN
```

乘法

```python
string * number
```

成员判断

```python
string1 in string
string1 not in string
```

最大值、最小值

```python
max(string1)
min(string1)
```

长度

```python
len(string1)
```



#### 字符串属性

| 属性                        | 含义                                                    | 用法                                                         |
| --------------------------- | ------------------------------------------------------- | ------------------------------------------------------------ |
| string.capitalize()         | 字符串首字母大写，其余全小写                            | 不需要参数                                                   |
| string.title()              | 把string当中的所有单词都变为首字母大写                  |                                                              |
| string.lower()              | 把string变成全小写                                      |                                                              |
| string.upper()              | 把string变成全大写                                      |                                                              |
| string.swapcase()           | 把string中的大写转成小写，小写转成大写                  |                                                              |
| string.isdigit()            | 检测string是否是数字，是就返回True，不是返回False       |                                                              |
| string.count(s[, n1, n2])   | 在字符串中查找指定字符的个数                            | s为要查找的字符串；n1为查找的起始位置，从0开始；n2为查找的截止位置，可为负数 |
| string.find(s)              | 查找s在string中最左边的位置，返回索引；若不存在，返回-1 | s为字符串，表示被查找内容                                    |
| string.rfind(s)             | 查找s在string中最右边的位置，返回索引；若不存在，返回-1 | s为字符串，表示被查找内容                                    |
| sting.strip()               | 删除string两边的换行符（'\n'），制表符（'\t'）和空格。  |                                                              |
| string.lstrip()             | 删除string左边的换行符（'\n'），制表符（'\t'）和空格。  |                                                              |
| string.rstrip()             | 删除string右边的换行符（'\n'），制表符（'\t'）和空格。  |                                                              |
| string.split(s)             | 把string以s分割，分割之后返回列表                       | 默认为空格，'\t'，'\n'                                       |
| string.splitlines(s)        | 把string以换行符（\n）分割，分割之后返回列表            |                                                              |
| string.format()             | 以关键字传值的方式在string中格式化输入内容              | 若为string中{name}传入值，则format(name="自定义内容")        |
| string.center(n, s)         | 把string居中，前后填充s                                 | n为数字，表示字符数；s为字符串，表示string前后填充的内容     |
| string.join(iterable)       | 把iterable的每两个元素之间用string结合起来              | iterable是指可迭代对象                                       |
| string.replace(old, new, n) | 把string中的从左到右的n个old替换成new                   | old和new均为字符串，意味把old替换成new；n为数字，即从左往右替换old的个数，可无 |

例子：

```python
'abcaaabccca'.count('a',1 , -1)  #3
'aaa'.center(10, '_')  #'___aaa____'
'aaa'.ljust(6, '_')  #'aaa___'
'a{}a{}'.format('b', 'c')  #'abac'
'_'.join(['a', 'b', 'c'])  #'a_b_c'
```



<br>

### 列表

list是一种有序的集合

```python
classmates = ['Michael', 'Bob', 'Tracy']
b = classmates[:]
c = b.copy()
```



#### 序列属性

索引

```python
list1[number]
```

分片

```python
list1[n1:n2:n3]  #从n1到n2(不包括n2)，步长为n3(默认为1)，-1表示倒序
```

加法

```python
list1 + list2 + ... + listN
```

乘法

```python
list * number
```

成员判断

```python
list1 in list
list1 not in list
list1 = ['Michael', 'Bob', 'Tracy']
print(['Bob'] in list1)  #False
```

最大值、最小值

```python
max(list1)
min(list1)
```

长度

```python
len(list1)  #列表的元素个数
```



#### 增删改查

`list()`，把为可迭代对象转换为列表：

```python
list(iterable)  #iterable 为可迭代对象
l = list("abcdefg")
```

`append()`，追加元素到末尾：

```python
>>> color = ['red', 'green', 'blue']
>>> color.append('yellow')
>>> color
['red', 'green', 'blue', 'yellow']
```

`insert()`，把元素插入到指定的位置：

```python
>>> color.insert(1, 'white')
>>> color
['red', 'white', 'green', 'blue', 'yellow']
```

根据下标增加值：

```python
>>> color[2:2] = ['orange', 'red']
>>> color
['red', 'white', 'orange', 'red', 'green', 'blue', 'yellow']
```

`extend()`，把iterable的元素追加到列表末尾：

```python
>>> color.extend(['red', 'pink'])
>>> color
['red', 'white', 'orange', 'red', 'green', 'blue', 'yellow', 'red', 'pink']
```

`copy()`，复制列表：

```python
>>> color1 = color.copy()
>>> color1
['red', 'white', 'orange', 'red', 'green', 'blue', 'yellow', 'red', 'pink']
```

复制列表：

```python
>>> color2 = color[:]
>>> color2
['red', 'white', 'orange', 'red', 'green', 'blue', 'yellow', 'red', 'pink']
```

`clear()`，清空列表内容：

```python
>>> color1.clear()
>>> color1
[]
```

`del`，删除整个列表：

```python
>>> del color1
>>> color1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'color1' is not defined
```

`del list[1]` 删除列表元素：

```python
>>> del color[1]
>>> color
['red', 'orange', 'red', 'green', 'blue', 'yellow', 'red', 'pink']
```

`pop()`，删除列表末尾的元素，并且返回该元素的值：

```python
>>> color.pop()
'pink'
>>> color
['red', 'orange', 'red', 'green', 'blue', 'yellow', 'red']
```

`pop(i)`，其中 `i` 是索引位置：

```python
>>> color.pop(1)
'orange'
>>> color
['red', 'red', 'green', 'blue', 'yellow', 'red']
```

`remove(cell)`，在列表中删除cell元素，cell必须是列表当中的元素，否则报错：

```python
>>> color.remove('red')  #只删除第一个
>>> color
['red', 'green', 'blue', 'yellow', 'red']
>>> color.remove('orange')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: list.remove(x): x not in list
```

`count(cell)`，查找cell在列表中的个数，返回数字：

```python
>>> color.count('red')
2
```

`index(cell)`，返回cell在列表中的索引：

```python
>>> color.index('green')
1
```

`reverse()`，使list逆序：

```python
>>> color.reverse()
>>> color
['red', 'yellow', 'blue', 'green', 'red']
```

`sort([reverse=True/False])`，使list降序/升序排序：

```python
>>> color.sort()
>>> color
['blue', 'green', 'red', 'red', 'yellow']
```

遍历

```python
color = ['red', 'green', 'blue']
for i in color:
    print(i)

for i in range(len(color)):
    print(color[i])

print('\n'.join(str(i) for i in color))
```



#### 列表生成式

```python
squares = [x ** 2 for x in [1,2,3,4,5]]  #[1, 4, 9, 16, 25]
[x ** 2 for x in [1, 2, 3, 4, 5] if x % 2 == 0]  #筛选出仅偶数的平方
print([m + n for m in 'ABC' for n in '123'])  #还可以使用两层循环
#['A1', 'A2', 'A3', 'B1', 'B2', 'B3', 'C1', 'C2', 'C3']
```

同时使用两个甚至多个变量：

```python
d = {'x': 'A', 'y': 'B', 'z': 'C' }
print([k + '=' + v for k, v in d.items()])
#['x=A', 'y=B', 'z=C']
```

把一个list中所有的字符串变成小写：

```python
>>> L = ['Hello', 'World', 'IBM', 'Apple']
>>> [s.lower() for s in L]
['hello', 'world', 'ibm', 'apple']
```

杨辉三角：

```python
def triangles(n):
    t = []
    for i in range(n):
        t = [t[i-1] + t[i] if i>0 and i<len(t) else 1 for i in range(len(t)+1)]
        print(t)
triangles(6)
```



<br>

### 元组

单元素元组必须有括号 `(100,)`

```python
tuple1 = (1, 2, 3)
tuple2 = ()  #空元组
```



#### 类型转换

```python
tuple3 = (iterable)  #iterable 为可迭代对象
```



#### 元组属性

| 属性              | 含义                            | 用法                                                         |
| ----------------- | ------------------------------- | ------------------------------------------------------------ |
| tuple.index(cell) | 返回cell在tuple中的索引         | cell是被查找索引的元素值，可以是任何数据类型，但必须是tuple当中的元素 |
| tuple.count(cell) | 查找cell在tuple的个数，返回数字 | cell是被计数的元素值，可以是任何数据类型，但必须是tuple当中的元素 |



<br>

### 字典

#### 创建字典

- 通过 `{}` 创建字典
- 通过 `dict{}` 创建字典，`dict(['ab', 'cd', ('name', 'Bob')])`，必须是 k-v 对
- 通过 `fromkeys()` 创建具有相同值的默认字典，`{}.fromkeys(['bob', 'tom'], 7)`



通过 `{}` 创建字典

```python
>>> {'name': 'Bob', 'aeg': 20}
{'name': 'Bob', 'aeg': 20}
```

通过 `dict{}` 创建字典

```python
>>> dict(['ab', 'cd', ('name', 'Bob')])  #必须是 k-v 对
{'a': 'b', 'c': 'd', 'name': 'Bob'}
```

通过 `fromkeys()` 创建具有相同值的默认字典

```python
>>> {}.fromkeys(['bob', 'tom'], 7)
{'bob': 7, 'tom': 7}
```

字典解析式

```python
>>> {k:v for (k,v) in zip(['a','b','c'],[1,2,3])}
{'a': 1, 'b': 2, 'c': 3}
```

读取文件

```python
d = {line.split()[0]:line.strip().split()[1] for line in open("1.txt")}
d = dict(line.strip().split() for line in open("1.txt"))

with open(file) as f:
    cons_score = dict(line.strip().split() for line in f if line)
f.close()
```





#### 增删改查

访问字典

```python
>>> d = {'Michael': 95, 'Bob': 75, 'Tracy': 85}
>>> d['Michael']  #用方括号
95
#遍历键
d = {'a': 1, 'b': 2, 'c': 3}
for key in d:
    print(key,d[key])
#遍历值
for value in d.values():
    print(value)
#同时迭代key和value
for item in d.items():
    print(item)

di = {}.fromkeys(['bob', 'tom'], 7)
print('%(name)s' % adict)  #通过格式化字符串访问
```



更新字典

通过键更新字典

- 如果字典中有该键，则更新相关值
- 如果字典中没有该键，则向字典中添加新值



删除字典

- 通过 `del` 可以删除字典中的元素或整个字典
- 使用内部方法 `clear()` 可以清空字典
- 使用 `pop()` 方法可以弹出字典中的元素

```python
del adict  #删除后adict不可访问
del adict['bob']  #删除bob
adict.pop('bob')  #删除bob
adict.clear()  #删除后字典为空 {}
```



判断 key 是否存在

```python
if 'Bob' in d:
    print("Bob's score is", d['Bob'])

# get方法如果字典中键不存在，则返回None
if d.get('Bob'):
    print("Bob's score is", d['Bob'])

>>> d.get('Thomas')  #返回none
>>> d.get('Thomas', -1)  #指定
-1
```

`len(adict)` 返回字典元素的个数

`adict.get('bob', 'not found')` 返回vaule或者none



迭代遍历



#### 排序

```python
for k in sorted(list(d.keys())):
    print(k, d[k])

for k in sorted(list(d.keys()), reverse=True):
    print(k, d[k])

# 按value排序，
dic = {'a':31, 'bc':5, 'c':3, 'asd':4, 'aa':74, 'd':0}
dict = sorted(dic.items(), key=lambda d:d[1], reverse = True)
print(dict)
#[('aa', 74), ('a', 31), ('bc', 5), ('asd', 4), ('c', 3), ('d', 0)]
print(dic_sort[i][0], dic_sort[i][1], sep='\t')
```



<br>

### 集合

#### 增删改查

set和dict类似，也是一组key的集合，但不存储value。由于key不能重复，所以，在set中，没有重复的key。

```python
>>> s = set([1, 1, 2, 2, 3, 3])
>>> s
{1, 2, 3}
```

`add(key)` 增加1个元素：

```py
>>> s.add(4)
>>> s
{1, 2, 3, 4}
```

`update(iterable)` 增加多个元素：

- 当参数为字符串时，将把字符串的每个字符作为1个元素添加到集合中

- 当参数为列表或元组时，将把元组或列表的每个元素作为1个元素添加到集合中

```python
>>> s.update((5, 6))
>>> s
{1, 2, 3, 4, 5, 6}
>>> s.update('78')
>>> s
{1, 2, 3, 4, 5, 6, '7', '8'}
```

`remove(key)` 删除元素（被删除的元素必须在集合中存在,否则将会抛出异常）：

```python
>>> s.remove('7')
>>> s
{1, 2, 3, 4, 5, 6, '8'}
```

`discard(key)` 删除元素（如果被删除的元素在集合中存在，则删除该元素；否则不做任何处理）：

```python
>>> s.discard('8')
>>> s
{1, 2, 3, 4, 5, 6}
```

`clear()` 清空集合：

```python
>>> s.clear()
>>> s
set()
```

<br>

#### 集合运算

交集

```python
>>> set1 = set([1, 2, 3])
>>> set2 = set([2, 3, 4])
>>> set1 & set2  #set1.intersection(set2)
{2, 3}
```



并集

```python
>>> set1 | set2  #set1.union(set2)
{1, 2, 3, 4}
```



差集

```python
>>> set1 - set2  #set1.difference(set2)
{1}
```

 

对称差集：两集合的**并集**与**交集**的**差集**，等于两集合的**对称差集**。即： `set1 ^ set2 == (set1 | set2) - (set1 & set2)`

```python
>>> set1 ^ set2  #set1.symmetric_difference(set2)
{1, 4}
```



子集，返回True或False

```python
>>> set1 < set2  #set1.issubset(set2)
False
```



父集，返回True或False

```python
>>> set1 > set2  #set1.issuperset(set2)
False
```



<br><br>

## 流程控制语句

### 赋值、表达式和打印

#### 赋值

```python
a = b = 10
a, b = 10, 20
a, b = (10, 20)
a, b = [10, 20]
a, b = b, a  #互换
```



#### 运算

`+` `-` `*` `/` `//` `%` `**` 

`<` `>` `<=` `>=` `==` `!=`

`and` `or` `not`



#### print输出

多个字符串用 `,` 隔开，遇到 `,` 会输出一个空格

```python
print('The quick brown fox', 'jumps over', 'the lazy dog')
```

`sep = '\n'` 指定print的分隔符，默认为空格

```python
print('hello', 'world!', sep = '')
```

`+` 加号表示字符串拼接，没有空格

```python
print('hello' + 'world!')
```

输出计算结果

```python
print('100 + 200 =', 100 + 200)
```

print 输出多行

```python
print ('''

''')
```

不换行

```python
print('how are you?', end = '')
print('\r %s>%s' % (head, tail), end='')
```

支持色彩处理

```python
print('\033[31m红色\033[0m')
```



#### input输入

`input()` 函数输入

```python
name = input('please enter your name: ')
```

`input()` 函数输入的是 `str` 类型的值，需要 `int()` 来比较大小。



#### 格式化输出

| 占位符 | 替换内容 |
| ------ | -------- |
| %d     | 整数     |
| %f     | 浮点数   |
| %s     | 字符串   |

<br>

```python
print('%d' % 123456789)
print('%6d|' % -456)  #占6个字符，右对齐
print('%-6d|' % 123)  #占6个字符，左对齐
print('%+6d|' % 234)  #占6个字符，数字前加 + 号
print('%06d|' % 345)  #占6个字符，数字前补 0

123456789
  -456|
123   |
  +234|
000345|
```

<br>

```python
print('%d' % 123456789)
print('%f' % 3.1415926)
print('%.2f|' % 3.1415926)  #保留小数点后两位
print('%6.2f|' % 3.1415926)  #占6个字符，保留小数点后两位，右对齐
print('%-6.2f|' % 3.1415926)  #占6个字符，保留小数点后两位，左对齐
print('%+6.2f|' % 3.1415926)  #占6个字符，保留小数点后两位，数字前加 + 号
print('%06.2f|' % 3.1415926)  #占6个字符，保留小数点后两位，数字前补 0

123456789
3.141593 
3.14|
  3.14|
3.14  |
 +3.14|
003.14|
```



<br>

### 条件判断

```python
age = 20
if age < 6:
    print('kid')
elif age < 18:
    print('teen')
else:
    print('adult')
```

```python
if x:
    print('True')
```

判断条件：

任何非零数字，非空字符串（空格不算）



<br>

### 三元表达式

```python
x, y = 3, 4
small = x if x < y else y
print(x)
```



<br>

### 循环

for 循环

```python
for x in [1, 2, 3]:
    sum +=x
print(sum)

for i in range(101):
    sum+=i
print(sum)
```

while 循环

```python
sum = 0
n = 1
while n <= 100:
    sum+=n
    n+=1
print(sum)
```

`break` 提前退出循环

`continue` 跳过当前的这次循环，直接开始下一次循环

`else` 语句，当循环正常结束时，else子句执行，如果是被break掉，则不执行

```python
import random

ran = random.randint(1, 10)
count = 3
while count:
    count -= 1
    answer = int(input('input a number:'))
    if answer > ran:
        print('too big')
    elif answer < ran:
        print('too small')
    else:
        print('right')
        break
else:
    print(ran)
```





## 函数

### 定义

```python
def add(x, y):
    print(x, '+', y, '=', x + y)
    return x + y
add(6,7)
```



### 参数

默认参数

```python
def power(x, n = 2):   #设置 n 的默认值为 2
    s = 1
    while n > 0:
        n -= 1
        s *= x
    return s
```

注意：

- 必选参数在前，默认参数在后
- 当不按顺序提供部分默认参数时，需要把参数名写上
- 默认参数必须指向不变对象



可变参数

参数前面加了一个 `*` 号，定义可变参数。 `*` 后面的变量是一个元组。

```python
def calc(*numbers):  #参数前面加了一个 * 号
    sum = 0
    for i in numbers:
        sum += i
    return sum
calc(1, 2, 3)
calc(2, 3)
nums = [1, 2, 3]
calc(*nums)  #在list或tuple前面加一个*号，把list或tuple的元素变成可变参数传进去
```



关键字参数

允许传入0个或任意个含参数名的参数，这些关键字参数在函数内部自动组装为一个dict。 `**` 后面的变量是一个字典。

```python
def person(name, age, **kw):  #参数前面加了两个 * 号
    print('name:', name, 'age:', age, 'other:', kw)

>>> person('Bob', 35, city='Beijing')
name: Bob age: 35 other: {'city': 'Beijing'}
>>> person('Adam', 45, gender='M', job='Engineer')
name: Adam age: 45 other: {'gender': 'M', 'job': 'Engineer'}
>>> extra = {'city': 'Beijing', 'job': 'Engineer'}
>>> person('Jack', 24, **extra)
name: Jack age: 24 other: {'city': 'Beijing', 'job': 'Engineer'}
```



命名关键字参数

和关键字参数 `**kw` 不同，命名关键字参数需要一个特殊分隔符 `*`，`*` 后面的参数被视为命名关键字参数。

```python
def person(name, age, *, city, job):
    print(name, age, city, job)

>>> person('Jack', 24, city='Beijing', job='Engineer')
Jack 24 Beijing Engineer
```



参数组合

参数定义的顺序必须是：必选参数、默认参数、可变参数、命名关键字参数和关键字参数

```python
def f2(a, b, c=0, *args, d=8, **kw):
    print('a =', a, 'b =', b, 'c =', c, 'args =', args, 'd =', d, 'kw =', kw)
```

a, b 是必选参数，c 是默认参数，args 是可变参数，d 是命名关键字参数，kw 是关键字参数。



将列表拆开再传参

```python
def add(x, y):
    print(x + y)

nums = [10, 5]
add(*nums)
```

将字典拆开再传参

```python
def get_info(name, age):
    print('%s is %s years old' % (name, age))

user = {'name:', name, 'age:', age}
get_info(**user)
```





### 递归

```python
# 阶乘
def fact(n):
    if n == 1:
        return 1
    return n * fact(n - 1)

print(fact(5))
```



```python
# 快速排序
import random

def qsort(num_list):
    if len(num_list) < 2:
        return num_list

    middle = num_list[0]
    smaller = [i for i in num_list[1:] if i <= middle]
    larger = [i for i in num_list[1:] if i > middle]
    return qsort(smaller) + [middle] + qsort(larger)

if __name__ == "__main__":
    nums = [random.randint(1, 100) for i in range(10)]
    print(nums)
    print(qsort(nums))
```





### lambda

```python
import random
nums = [random.randint(1, 100) for i in range(100)]
print(list(filter(lambda x: x % 2, nums)))
print(list(map(lambda x: x * 2 + 1, nums)))
```

`filter(func, seq)` 将seq列表中的每一个元素交给布尔函数func处理，保留返回True的元素。

`map(func, seq)` 将seq列表中的每一个元素交给布尔函数func处理，返回处理结果



### 高阶函数

参数为函数



### 生成器

yield  #



### 闭包





### 常用函数

`pass` 语句，什么都不做



数学函数

`abs()`

`max()`



`len()` 

`range(start, stop[, step])` from start (inclusive) to stop (exclusive) by step

`range(10)` 0～9 结束的数字不包含

`range(6, 11)` 

`range(10, 0, -1)` 



字符串

str.find('pa')    #返回一个传入的子字符串的偏移量，无则返回-1

str.replace('pa','XYZ')  

line.split(',')  #分割字符串

str.upper(); str.lower()   #变大小写

line.rstrip()    #去空格



类型转换

`int()`

`str()`

`bool()`

`ord('s')`

`chr(115)`

`list()` 

`tuple()`

`isinstance()` 函数来判断一个对象是否是一个已知的类型。

```python
>>>a = 2
>>> isinstance (a,int)
True
>>> isinstance (a,str)
False
>>> isinstance (a,(str,int,list))    # 是元组中的一个返回 True
True
>>> isinstance([], Iterable) 判断一个对象是否是 Iterable 对象
True
```

`enumerate()` 函数可以把一个list变成索引-元素对

```python
>>> list(enumerate(['A', 'B', 'C']))
[(0, 'A'), (1, 'B'), (2, 'C')]

>>> for item in enumerate(['A', 'B', 'C']):
...     print('#%s: %s' % (item[0], item[1]))
...
#0: A
#1: B
#2: C

>>> for i, value in enumerate(['A', 'B', 'C']):
...     print(i, value)
...
0 A
1 B
2 C
```



`reversed()` 接受一个序列作为参数，返回一个以逆序访问的迭代器

```python
>>> list(reversed('ABC'))
['C', 'B', 'A']
>>> list(reversed(['A', 'B', 'C']))
['C', 'B', 'A']
```



`sorted()` 接受一个可迭代对象作为参数，返回一个有序的列表

```python
>>> sorted(['A', 'D', 'C'])
['A', 'C', 'D']
```





### argv参数

```python
import sys
print(sys.argv[0])
```





## 高级特性

### 切片

切片没有的下标不会报错

```python
L = ['Michael', 'Sarah', 'Tracy', 'Bob', 'Jack']
>>> L[0:3]  #取前3个元素，从索引0开始取，直到索引3为止
['Michael', 'Sarah', 'Tracy']
>>> L[:3]  #如果第一个索引是0，还可以省略
['Michael', 'Sarah', 'Tracy']
>>> L[1:3]  #从索引1开始，取出2个元素
['Sarah', 'Tracy']
>>> L[-2:]  #
['Bob', 'Jack']
>>> L[-2:-1]
['Bob']
```

```python
L = list(range(20))
>>> L[:10:2]  #前10个数，每两个取一个
[0, 2, 4, 6, 8]
>>> L[::5]  #所有数，每5个取一个
[0, 5, 10, 15]
>>> L[:]  #只写[:]就可以原样复制一个list
[0, 1, 2, 3, ..., 19]
```

```python
>>> (0, 1, 2, 3, 4, 5)[:3]  #tuple也可以用切片操作，只是操作的结果仍是tuple
(0, 1, 2)
>>> 'ABCDEFG'[:3]
'ABC'
>>> 'ABCDEFG'[::2]
'ACEG'
>>> 'ABCDEFG'[::-1]  #将字符串反转
'GFEDCBA'
```

```python
print('ABCDEFG'[:1])  #输出A
print('ABCDEFG'[0])  #输出A
print('ABCDEFG'[-1])  #输出G
print('ABCDEFG'[-1:])  #输出G
print(''[:1])  #正常
print(''[0])  #报错
```





## 文件对象

| 文件模式 | 操作                                         |
| -------- | -------------------------------------------- |
| r        | 以读方式打开（文件不存在则报错），默认       |
| 2        | 以写方式打开（文件存在则清空，不存在则创建） |
| a        | 以追加方式打开（必要时创建新文件）           |
| r+       | 以读写方式打开（参见r）                      |
| w+       | 以读写方式打开（参见w）                      |
| a+       | 以读写方式打开（参见a）                      |
| b        | 以二进制方式打开                             |



```python
fobj = open('text.txt')  #默认以 r 方式打开
data = fobj.read()  #read默认读取全部内容
fobj.close()  #关闭文件

fobj = open('text.txt', 'w')
fobj.write('hello\n')  #写数据时，先放到缓冲区，当数据达到一定程度时，自动写入磁盘
fobj.flush()  #立即将数据同步至磁盘
fobj.writelines(['line\n', 'line2\n'])  #
fobj.close()  #关闭文件时，数据自动写入磁盘
```



### read方法

如果没有指定size参数（默认值为-1），或者size为负，文件被读取直至末尾

```python
data = fobj.read(4096)  #读4096字节
```



### readline方法

读取打开文件的一行，包括行结束符，作为字符串返回。也有一个可选的size参数，默认为-1，代表读至行结束符。如果提供该参数，那么在超过size个字节后，会返回不完整的行。

```python
data = fobj.readline()
```



### readlines方法

读取所有（剩余的）行，把它们作为一个字符串列表返回。

```python
data = fobj.readlines()
```



### write

将字符串写入到文件中。写入文件时，不会自动添加行结束标识。



### writelines

将列表写入到文件中。写入文件时，不会自动添加行结束标识。



### 文件迭代

```python
fobj = open('passwd')
for line in fobj:
    print(line, end='')

for line in open('passwd'):
    print(line.strip('\n'))
```



### with子句

将打开文件的操作放在with语句中，代码块结束后，文件将自动关闭

```python
with open('text.txt') as fobj:
    print(fobj.readline())

with open('text.txt') as fobj:
    for line in fobj:
        print(line)

```





```python
if __name__ == '__main__':
    # Method 1: 通过readlines方法一次把整个文件从磁盘读入内存，在内存中遍历各行    
    with open('test.txt', 'r') as file:
        lines = file.readlines()
        for line in lines:
            print(line)
            
    # Method 3:通过readline方法一次将文件的一行读入内存
    with open('test.txt', 'r') as file:
        while True:
            line = file.readline()
            if line:
                print(line)
            else:
                break
            
    # Method 2: IO对象本身是一个可迭代对象，通过迭代器访问文件对象，每次将文件的一行从磁盘读入内存
    file = open('test.txt', 'r')
    for line in file:
        print(line)
    file.close()
```

Python按行读取大文件https://blog.csdn.net/da_kao_la/article/details/90183691



### 遍历文件夹

```python
files = os.listdir(dir_name)
for f in files:
    file_name = dir_name + '/' + f
```







### 标准文件

```python
import sys
a = sys.stdin.readline()  #读取键盘输入，回车也作为一个字符串\n读入
print(a)

import sys
sys.stderr.write('STDERR\n')  #错误输出
```



## 模块



```python
import script
from imp import reload
```



写一个模块，命名为 `star.py`：

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

def print_star(num=30):
    return('*' * num)
```

导入并使用这个模块：

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import star

print(star.print_star())
```

或者：

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

from star import print_star

print(print_star())
```



### 特殊属性

修改 `star.py`：

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

def print_star(num=30):
    return('*' * num)

if __name__ == "__main__":
    print(print_star())
```

当脚本被运行时，`__name__` == `'__main__'`，会运行下面的代码；当被其他脚本调用时，不会运行代码。



### 常用模块

### random

```python
import random
random.randint(a, b)  #返回一个随机整数N，a <= N <= b。
random.choice(seq)
```



### os

getcwd()  pwd

mkdir()

chmod()

chdir()

symlink('/etc/passwd', 'yonghu') ln -s /etc/passwd yonghu

listdir()  #ls

mknod()  #touch



### keyword



### string



### subprocess 调用系统命令



### time

time.sleep(0.1) 等待0.1秒

time.time() 

time.ctime() 



### collections

counter



## 异常处理

```python
try:
    try_suite
except IOError:
    print('Error')
else:
    print(result)  #正常运行会输出结果
finally:
    print(result)  #无论如何都会运行
```





## 正则表达式

### 匹配

```python
import re

m = re.match('f..', 'food')  #从开匹配，匹配到返回match对象，否则返回None

m = re.search('f..', 'seafood')  #匹配到返回match对象，否则返回None
print(m.group())  #返回匹配到的字符

m = re.findall('f..', 'seafood is food')  #返回所有匹配到的字符串列表

#返回由匹配对象构成的迭代器，迭代器中的每个对象都有group方法
for m in re.finditer('f..', 'seafood is food'):
    print(m.group())
```

### 分组

```python
pattern = re.compile('transcript_id ("\S+"); .*FPKM "(\S+)"')
m = pattern.search
dict_FPKM[] = 
```

注意到`group(0)`永远是原始字符串，`group(1)`、`group(2)`……表示第1、2、……个子串。

### 切割

```python
line = 'hello-world.tar.gz'
m = re.split('-|\.', line)  #返回列表
print(m)
```

### 替换

```python
m = re.sub('Bob', 'Tom', 'Hi Bob. How are you Bob?')
print(m)
```

### 编译

```python
pattern = re.compile('f..')
m = pattern.findall('seafood')
print(m)
```





## 类

### 魔术方法

```
__init__

__str__

__call__
```









## 参考

[Python 代码规范](https://pythoncaff.com/articles/35/python-code-specification#7f7cbe)



























