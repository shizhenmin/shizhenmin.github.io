---
title: "在github上搭建个人博客"
categories: Blog
tags: 教程 github 博客 jekyll
---

* content
{:toc}

很早之前就想在 github 上搭建自己的博客，但照着网上的一些教程，一直没有成功。最近因为疫情呆在家里，刚好利用这段时间，成功把博客搭建出来。现在回过头来看看搭建时的记录，发现也没那么难，于是对方法进行总结，写出了这个教程。

搭建博客的步骤主要有以下几步：

1. 在 github 上 fork 其他人的博客项目作为模板
2. 对博客进行修改
3. 撰写博客
4. 安装 jekyll，在本地预览博客



## fork项目

首先从 github 上 fork 一个项目，这里我 fork 的是一位阿里前端大佬的博客，博客地址是这个：[gaohaoyang.github.io](<https://github.com/Gaohaoyang/gaohaoyang.github.io>) 。

接着修改项目名称，将名称修改为 `xxx.github.com`，`xxx` 是你 github 账号的用户名。现在就可以通过 `https://xxx.github.io/` 这个域名进行访问了。



## 修改博客

博客的大部分个人信息是在 `_config.yml` 这个文件中，这里面对配置的解释非常详细，十分容易修改。除了上面的配置文件外，博客信息还分散在其它地方，需要一一修改。



### 修改配置文件

修改配置文件 `_config.yml` 的内容。需要修改的地方有：网站标题和描述，个人社交网站的用户名，评论和统计的用户名或ID。

我在修改时，去掉了评论和流量统计的部分。另外我在文件的最后加上了这些代码：
```yml
plugins:
  - jekyll-paginate

defaults:
  - scope:
      path: ""
      type: "posts"
    values:
      layout: "post"
  - scope:
      path: ""
    values:
      layout: "default"
```

`plugins` 下加入了一个分页插件 `jekyll-paginate`，它能设置每一页中显示多少篇文章。这个插件在 Jekyll 2 中默认就有，但从 Jekyll 3 开始，必需加入这样的配置使其生效，否则主页中就不能正常显示文章。当前的设置是每页6篇博客，可以在 `paginate: 6` 中修改为其它值。

`defaults` 下加入的这些内容，是设置所有文章的布局。在不加入这些内容的情况下，就需要在每一篇文章的开头部分加上 `layout: post`。



### 删除原博主信息

除了在 `_config.yml` 中修改信息外，在其它地方还有一些内容需要修改。
* `page\4about.md` 是原博主的个人简介
* `page\3collections.md` 是原博主的收藏夹
* `index.html` 的 7~9 行是主页上方的简单介绍
* `favicon.ico` 是网页的图标

原博客文档在 `_drafts` 和 `_posts` 这两个文件夹中，需要删除里面的所有文件。



### 删除评论和流量统计功能

要想删除评论和流量统计的功能，除了在 `_config.yml` 中删除对应配置外，还需要在 `_includes\footer.html` 和 `_layouts\post.html` 中删除相应的代码。



### 新标签页打开文章

在原博客中，点击某一篇文章，会在当前页面打开这篇文章。我不太习惯这样的设定，因此希望点击文章时，能在新标签页打开文章，而原来的页面不受影响。可以在 html 文件的的 `<a>` 标签中加入 `target="_blank"` 属性，来实现这样的目的：

```html
<a target="_blank" href=""></a>
```



## 撰写博客

首先删除 `_posts` 文件夹中的文件。这个文件夹中放的是博客的文章，通常是 markdown 格式的。

我们随意写一个 markdown 文档，比如：

```
---
title: test
---

* content
{:toc}

## test
This is a test page.
```

把这个文件命名为 `2020-03-10-test.md` ，上传到 `_posts` 目录中，再刷新博客主页，就可以看到刚刚的这篇文章了。

<br>

这里还需要注意三点：

**1、markdown 文档需要包含头信息**

头信息就是 markdown 文档的开头的两行 `---` 及其中包含的变量。只有写上头信息的 markdown 文档才会被转换成 html 网页。另外，也可以不定义头信息变量，只写上两行 `---`。对头信息的具体介绍大家在官网查看 [Front Matter](https://jekyllrb.com/docs/front-matter/)。

**2、添加目录**

```
* content
{:toc}
```

这两行的目的是添加目录。

**3、markdown 文档的命名格式**

markdown 文档必须以这样的格式命名：`YEAR-MONTH-DAY-title.MARKUP`，否则也不会被转换成 html 网页。



## 安装Jekyll

其实到上面一步，博客的搭建已经基本完成了，但是每一次修改后，都需要上传到 github 上才能看到修改后的结果，而上传github这个过程并不总是那么顺利，因此如果能够在本地预览博客，确定完成修改之后再进行上传，能大大提高效率。安装 Jekyll 就能在本地对博客进行预览。

下面就简单介绍一下 Jekyll 的安装，详细的安装步骤可以参考官网 [Installation](https://jekyllrb.com/docs/installation/)。



### 安装Ruby开发环境

从 [RubyInstaller Downloads](https://rubyinstaller.org/downloads/) 下载 **Ruby+Devkit** 并安装。安装时勾选使用 UTF-8 作为编码方式。



### 安装Jekyll和bundler

重新打开一个命令提示符（使环境变量能够更新、生效），输入：

```
gem install jekyll bundler
```

进行安装 jekyll 和 bundler。如果安装进度太慢，最好更换一下RubyGems的镜像源：

```
$ gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/
$ gem sources -l
https://gems.ruby-china.com
```

安装完成后，输入

```
jekyll -v
```

检查是否安装成功。



### 使用jekyll

将 github 上的博客项目下载到本地，进入文件夹，运行：

```
bundle init
```

该命令会生成 `Gemfile` 文件，在 `Gemfile` 文件中写入：

```
gem "jekyll"
gem "jekyll-paginate"
```

`jekyll-paginate` 是一个分页的插件，需要进行安装：

```
gem install jekyll-paginate
```

插件安装完成后，运行：

```
jekyll serve
```

在浏览器中访问 <http://localhost:4000> 即可对博客进行预览。




